{% extends 'shop/base.html' %}
{% load static %}

{% block head %}
  <title>{{ product.name }}</title>
  <link href="{% static "shop/product_details.css" %}" rel="stylesheet">
{% endblock head %}

{% block body %}
<div id="content">
<div id="main">
  <div class="image">
    <img src="{{ product.primary_image.image.url }}">
    {% for image in product.productimage_set.all %}
      {% if image != product.primary_image %}
        <img src="{{ image.image.url }}">
      {% endif %}
    {% endfor %}
    <button class="previous">&#10094;</button>
    <button class="next">&#10095;</button>
  </div>
  <div id="product-info">
    <div class="product-name">{{ product.name }}</div>
    <div>{{ mean_rating | floatformat:"1" }}/5</div>
    <div class="product-price">&euro; {{ product.price | floatformat:"2" }}</div>
    <form action="{% url 'add_to_cart' product.id %}" method="post">
      {% csrf_token %}
      {{ add_to_cart_form.as_p }}
      <input type="submit" value="Add to cart">
    </form>
  </div>
</div>
<div>
  <form action="{% url 'post_review' product.id %}" method="post">
    {% csrf_token %}
    <p>
      {{ review_form.content.label_tag }}
      {{ review_form.content }}
    </p>
    <p>
      {{ review_form.rating.label_tag }}
      {{ review_form.rating }}
    </p>
    <input type="submit" value="Submit Review">
  </form>
  <div class="reviews">
    {% for review in reviews %}
      <p><strong>{{ review.rating }}/5</strong></p>
      <p>{{ review.content }}</p>
    {% endfor %}
  </div>
</div>
</div>

<script src="{% static 'shop/image_slideshow.js' %}"></script>
{% endblock body %}
